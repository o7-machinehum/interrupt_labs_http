<head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="I’m building an open-source USB drive with a hidden obfuscation If you plug the device in normally, it will appear blank, but if you quickly plug it i"><meta name="author" content="Ryan Walker"><meta property="og:title" content="I&#39;m Building a Self-Destructing USB Drive Part 2"><meta property="og:description" content="I’m building an open-source USB drive with a hidden obfuscation If you plug the device in normally, it will appear blank, but if you quickly plug it i"><meta property="og:site_name" content="Interrupt Labs Blog"><meta property="og:type" content="article"><meta property="og:image" content="https://interruptlabs.caimg/home-bg.jpg"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://interruptlabs.caimg/home-bg.jpg"><title>I&#39;m Building a Self-Destructing USB Drive Part 2 - Interrupt Labs Blog</title><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css"><!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]--><link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet"><script async src="https://www.googletagmanager.com/gtag/js?id=G-JPDQ8MSX3T"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JPDQ8MSX3T")</script><link rel="icon" href="/img/logo.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css"><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="Interrupt Labs Blog" type="application/rss+xml">
</head><nav><a class="navbar-brand" href="/"><img src="/img/home-icon.png" alt="Homepage" style="width:60px"></a></nav><style>.column{float:left;width:50%}.row:after{content:"";display:table;clear:both}.stroke{-webkit-text-stroke:1px #000}</style><header class="intro-header" style="background-image:url(/img/home-bg.jpg)"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1 class="stroke">I'm Building a Self-Destructing USB Drive Part 2</h1><span class="meta">2022-08-31</span></div></div></div></div></header><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div><div class="column"><a href="/2022/07/29/I-m-Building-a-Self-Destructing-USB-Drive/">&lt&lt Previous Post</a> &#8205</div><div class="column" , style="text-align:right"><a href="/2023/02/06/I-Built-a-Self-Destructing-USB-Drive-Part-3/">Next Post &gt&gt</a></div></div><br><hr><p>I’m building an open-source USB drive with a hidden obfuscation If you plug the device in normally, it will appear blank, but if you quickly plug it in three times in a row, you will be able to read and write data. We built Ovrdrive for journalists working in hostile environments, security researchers, and anyone interested in open hardware.</p><p align="center"><a target="_blank" rel="noopener" href="https://shop.interruptlabs.ca/products/ovrdrive-usb">Device for Sale Now!</a></p><hr><p>This post outlines the design process and challenges. I’ll discuss my bench prototyping, the schematic, layout and mechanical sourcing.</p><p>A lot of the responses to the last post pointed out that the device doesn’t <em>actually</em> self-destruct. In response to these comments, the device will now have two modes: just hiding the data and a full self-destruct (FSD).</p><h2 id="Enclosure"><a href="#Enclosure" class="headerlink" title="Enclosure"></a>Enclosure</h2><p>I found a shop overseas selling USB enclosures without the internals, which saves me from designing an enclosure from scratch. I’ve never designed an injection moulded enclosure before, and today won’t be the day.</p><p><img src="/img/usb_case.jpg"></p><figcaption>USB Drive Enclosures</figcaption><p></p><p>Out of the four samples I received, I settled on the black one (far left in the picture above). Unfortunately, the vendor could not give me 3D CAD files, just DXF. If you don’t know, DXF is a simple flat drawing; not ideal, but better than nothing.</p><p><img src="/img/case.png"></p><figcaption>Drawing of Enclosure</figcaption><p></p><p>I took these DXF drawings, imported them into FreeCAD, and then extruded them into some 3D models. This was a strange way to draw a model; the DXF lines were converted to undimensioned FreeCAD sketch objects and then extruded. I imported the PCB and ended up here:</p><p><img src="/img/usb.png"></p><figcaption>Device Render</figcaption><p></p><p>Hopefully, the final build will come out looking something like that.</p><h2 id="FSD-Full-Self-Destruct"><a href="#FSD-Full-Self-Destruct" class="headerlink" title="FSD: Full Self Destruct"></a>FSD: Full Self Destruct</h2><p>My goal is to build a discrete device; if the cops snatch a journalist in a non-privacy country, they shouldn’t think twice about a loose USB drive. When they plug it in, the device shouldn’t explode, melt, release corrosive material or do anything else insane (even though that would probably make a more exciting blog post). It should quietly destroy itself beyond repair.</p><p>My solution for this is overloading the flash memory voltage rail. I’ll have to say, this is the first time I’ve ever actually looked at the absolute maximum ratings of a component with the intent to go outside them.<br><img src="/img/max_ratings.png"></p><p>The part needs to be pushed over 4.6V in order to be completely disabled. I can use a simple voltage doubler off the 5V line to do this.<br><img src="/img/distruct.png"></p><p>The operation of this circuit is pretty simple. When Distruct_PWM is low, Ca will charge to 4.3V, which is 5V minus the 0.7V drop over the diode. When I set Distruct_PWM high from the MCU, this puts the bottom of Ca at 5, giving a total potential of 9.3V. This flows into Cb and gets trapped for the next cycle. When you want to dump the energy into the flash IC, enable Q1 and say goodbye to those cute dog pics.</p><h2 id="Sensing-Circuit"><a href="#Sensing-Circuit" class="headerlink" title="Sensing Circuit"></a>Sensing Circuit</h2><p>OK, so how will the device know if the user has licked their fingers or not, and hence whether or not to destroy the data? This can be done with a bioimpedance measurement, i.e., a measurement of the resistance of the user’s skin. If the skin’s resistance is low (500k or less), we can assume their fingers are wet. There’s probably a fancy chip to measure bioimpedance, but since the chip shortage, I’ve been inclined to use generic components.<br><img src="/img/cct.png"></p><p>I pinched this circuit from <em>The Art of Electronics</em>; it’s a current supply. Let’s discuss how it works. U1 is a voltage reference; as long as it gets enough current to operate, there will be 2.5V dropped over it. The cathode is connected to R2, while the anode is connected to the non-inverting input of the opamp. The output of the opamp will supply the current required to hold the two inputs at the same voltage. Therefore we can assume there is 2.5V dropped over R2 as well. The current through R2 is then</p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>R</mi><mn>2</mn></mrow></msub><mo>=</mo><mfrac><mn>2.5</mn><msub><mi>R</mi><mn>2</mn></msub></mfrac></mrow><annotation encoding="application/x-tex">I_{R2} = \frac{2.5}{R_2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.83333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.07847em">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-.07847em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.00773em">R</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.2902079999999998em;vertical-align:-.44509999999999994em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.845108em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.31731428571428577em"><span style="top:-2.357em;margin-left:-.00773em;margin-right:.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">.</span><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.44509999999999994em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><p>Our electrodes are connected across J1, and the voltage at Vx and Vs is again determined by Ohm’s law:</p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>x</mi></msub><mo>=</mo><msub><mi>I</mi><mrow><mi>R</mi><mn>2</mn></mrow></msub><mo>⋅</mo><msub><mi>R</mi><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">V_x = I_{R2} \cdot R_L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.83333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.22222em">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.151392em"><span style="top:-2.5500000000000003em;margin-left:-.22222em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.83333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.07847em">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-.07847em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.00773em">R</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.83333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-.00773em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span><p>So we can use these two equations to solve for the load resistance, RL:</p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>L</mi></msub><mo>=</mo><msub><mi>V</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msub><mo>⋅</mo><mfrac><msub><mi>R</mi><mn>2</mn></msub><mn>2.5</mn></mfrac></mrow><annotation encoding="application/x-tex">R_L = V_{out} \cdot \frac{R_2}{2.5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.83333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.32833099999999993em"><span style="top:-2.5500000000000003em;margin-left:-.00773em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.83333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.22222em">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2805559999999999em"><span style="top:-2.5500000000000003em;margin-left:-.22222em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1.233431em;vertical-align:-.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8884309999999999em"><span style="top:-2.6550000000000002em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">.</span><span class="mord mtight">5</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.4101em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.00773em">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.31731428571428577em"><span style="top:-2.357em;margin-left:-.00773em;margin-right:.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><p>This is what we’ll use to calculate skin resistance.</p><h3 id="Microcontroller"><a href="#Microcontroller" class="headerlink" title="Microcontroller"></a>Microcontroller</h3><p>I chose a simple attiny25 for the brains of the project. It’s a step down from the 32bit ARM chips I typically use. It was refreshing to fit the entire application into 55 lines of code with only one required header.</p><p>I configured a PWM channel to test the code. I read and ADC pin and output the voltage as a duty cycle on the PWM pin. Using my multimeter on DC mode, I read back the voltage I was sampling.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;avr/io.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// PWM PA6</span></span><br><span class="line"><span class="comment">// ADC PA1</span></span><br><span class="line"><span class="comment">// LED PA2</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">float</span> R2 = <span class="number">747e3</span>;   <span class="comment">// R2 in schematic</span></span><br><span class="line"><span class="type">const</span> <span class="type">float</span> Rth = <span class="number">0.4e6</span>;  <span class="comment">// If r &gt; 1Mohm, finger not wet.</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">init_pwm</span><span class="params">()</span> &#123;</span><br><span class="line">   DDRA |= (<span class="number">1</span> &lt;&lt; PA6);                    <span class="comment">// PA6 as output</span></span><br><span class="line">   OCR1A = <span class="number">0x0000</span>;</span><br><span class="line">   TCCR1A |= (<span class="number">1</span> &lt;&lt; COM1A1);               <span class="comment">// set non-inverting mode</span></span><br><span class="line">   TCCR1A |= (<span class="number">1</span> &lt;&lt; WGM11) | (<span class="number">1</span> &lt;&lt; WGM10); <span class="comment">// set 10bit phase corrected PWM Mode</span></span><br><span class="line">   TCCR1B |= (<span class="number">1</span> &lt;&lt; CS11);                 <span class="comment">// set prescaler to 8 and starts PWM</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">set_pwm</span><span class="params">(<span class="type">float</span> voltage)</span> &#123;</span><br><span class="line">   OCR1A = ( voltage / <span class="number">5</span> )* <span class="number">0x400</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">init_adc</span><span class="params">()</span> &#123;</span><br><span class="line">    ADMUX &amp;= ~(<span class="number">1</span> &lt;&lt; REFS0); <span class="comment">// Use 5V as reference</span></span><br><span class="line">    ADMUX &amp;= ~(<span class="number">1</span> &lt;&lt; REFS1);</span><br><span class="line">    ADMUX |= (<span class="number">1</span> &lt;&lt; MUX0);   <span class="comment">// Use ADC1 (PA1)</span></span><br><span class="line">    ADCSRB |= (<span class="number">1</span> &lt;&lt; ADLAR); <span class="comment">// Left adjusted (8bit) operation alright</span></span><br><span class="line">    ADCSRA |= (<span class="number">1</span> &lt;&lt; ADEN);  <span class="comment">// Enable ADC</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">float</span> <span class="title function_">read_adc</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">float</span> voltage;</span><br><span class="line">    ADCSRA |= (<span class="number">1</span> &lt;&lt; ADSC);</span><br><span class="line">    <span class="keyword">while</span>(ADCSRA &amp; (<span class="number">1</span> &lt;&lt; ADSC)) &#123;&#125;;</span><br><span class="line">    voltage = ADCH;</span><br><span class="line">    voltage = voltage * <span class="number">5</span> / <span class="number">0xff</span>;</span><br><span class="line">    <span class="keyword">return</span> voltage;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span> &#123;</span><br><span class="line">    DDRA = <span class="number">1</span> &lt;&lt; PA2; <span class="comment">// LED</span></span><br><span class="line"></span><br><span class="line">    init_pwm();</span><br><span class="line">    init_adc();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">float</span> v, r = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        v = read_adc();</span><br><span class="line">        set_pwm(v);</span><br><span class="line">        r = v * (R2/<span class="number">2.5</span>);</span><br><span class="line"></span><br><span class="line">        (r &gt; Rth) ? (PORTA &amp;= ~(<span class="number">1</span> &lt;&lt; PA2)) : (PORTA |= <span class="number">1</span> &lt;&lt; PA2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="The-Build"><a href="#The-Build" class="headerlink" title="The Build"></a>The Build</h2><p>When working for a client, I don’t breadboard. It’s too expensive and doesn’t make sense with modern SMD components. My usual workflow is to go from simulation straight to schematic and board design. But for this project, I reached for the breadboard. I did this in order to derisk the bioimpedance circuit I discussed above. It felt like I was back in school again, nostalgic about DIP components and paper schematics.<br><img src="/img/lick.gif"></p><figcaption>Let there be light!</figcaption><p></p><p>The logic works fine. All of the learnings from this prototype were integrated into the final design.</p><p>The next and final post will be documenting the entire build, I’m hoping to then get a small crowdfunding campaign launched to build several of these devices for the community. Stay in touch and happy hacking!</p></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><hr><h3 id="_authors">Author</h3><div style="display:flex"><div><img src="/img/me.jpg" style="width:350px"></div><div style="margin-left:25px"><h4>Ryan Walker<p style="font-weight:400">Building open source stuff with open source stuff.</p><div style="display:flex"><div style="display:flex: 50%"><div style="display:flex;margin-top:5px;align-items:center"><img src="/img/shop.png" style="width:20px;padding-top:0;margin:0"> <a target="_blank" rel="noopener" href="https://shop.rootkitlabs.com" style="margin-left:15px">Our Shop</a></div><div style="display:flex;margin-top:5px;align-items:center"><img src="/img/email.png" style="width:20px;padding-top:0;margin:0"> <a href="malto:info@rootkitlabs.com" style="margin-left:15px">Email</a></div><div style="display:flex;margin-top:5px;align-items:center"><img src="/img/youtube.png" style="width:20px;padding-top:0;margin:0"> <a target="_blank" rel="noopener" href="https://www.youtube.com/@rootkitlabs" style="margin-left:15px">Youtube</a></div><div style="display:flex;margin-top:5px;align-items:center"><img src="/img/github.png" style="width:20px;padding-top:0;margin:0"> <a target="_blank" rel="noopener" href="https://github.com/o7-machinehum" style="margin-left:15px">GitHub</a></div></div><div style="display:flex: 50%;margin-left:10px"><div style="display:flex;margin-top:5px;align-items:center"><img src="/img/ig.jpg" style="width:20px;padding-top:0;margin:0"> <a target="_blank" rel="noopener" href="https://www.instagram.com/rootkitlabs/" style="margin-left:15px">Instagram</a></div><div style="display:flex;margin-top:5px;align-items:center"><img src="/img/discord.png" style="width:20px;padding-top:0;margin:0"> <a target="_blank" rel="noopener" href="https://discord.gg/EtZT7mjNuM" style="margin-left:15px">Discord</a></div><div style="display:flex;margin-top:5px;align-items:center"><img src="/img/twitter.png" style="width:20px;padding-top:0;margin:0"> <a target="_blank" rel="noopener" href="https://twitter.com/machinehum" style="margin-left:15px">Twitter</a></div><div style="display:flex;margin-top:5px;align-items:center"><img src="/img/rss.png" style="width:20px;padding-top:0;margin:0"> <a target="_blank" rel="noopener" href="https://rootkitlabs.com/atom.xml" style="margin-left:15px">RSS Feed</a></div></div></div></h4></div></div></div></div></div></article>